# mini-cheetah-model
* Mini Cheetah Dynamic and Kinematic Model Generated by FROST
## Joints order
Define encoder[12] as follows:

case: v1.urdf
encoder[12] = [
    torso_to_abduct_fl_j
    abduct_fl_to_thigh_fl_j
    thigh_fl_to_shank_fl_j
    torso_to_abduct_fr_j
    abduct_fr_to_thigh_fr_j
    thigh_fr_to_shank_fr_j
    torso_to_abduct_hl_j
    abduct_hl_to_thigh_hl_j
    thigh_hl_to_shank_hl_j
    torso_to_abduct_hr_j
    abduct_hr_to_thigh_hr_j
    thigh_hr_to_shank_hr_j
]

case: v2.urdf
encoder[12] = [
    torso_to_abduct_fr_j
    abduct_fr_to_thigh_fr_j
    thigh_fr_to_shank_fr_j
    torso_to_abduct_fl_j
    abduct_fl_to_thigh_fl_j
    thigh_fl_to_shank_fl_j
    torso_to_abduct_hr_j
    abduct_hr_to_thigh_hr_j
    thigh_hr_to_shank_hr_j
    torso_to_abduct_hl_j
    abduct_hl_to_thigh_hl_j
    thigh_hl_to_shank_hl_j
]

## Generated functions for the Contact-aided InEKF
$$
\text{Forward Kinematics} : \textbf{h}_p(\alpha)
$$

#### files

p_Body_to_FrontLeftFoot_mex.mexw64
p_Body_to_FrontRightFoot_mex.mexw64
p_Body_to_HindLeftFoot_mex.mexw64
p_Body_to_HindRightFoot_mex.mexw64

#### input

encoder[12]     unit: radius

#### output

p[3]            unit: m

#### note

Kinematic in Body frame corresponding to translation


$$
\text{Jacobians}: \textbf{J}_v(\alpha)
$$

#### files

Jvb_Body_to_FrontLeftFoot_mex.mexw64
Jvb_Body_to_FrontRightFoot_mex.mexw64
Jvb_Body_to_HindLeftFoot_mex.mexw64
Jvb_Body_to_HindRightFoot_mex.mexw64

#### input

encoder[12]     unit: radius

#### output

matrix[3,12]    unit: m/radius

#### note

Body Jacobian corresponding to linear velocity

## FK-validation

#### to run the code

First unzip the package *mat.zip* in */lcm-log*, then specify a log file in *FK_validation.m* and run the script.  It will give you an variable name *diff* that contains the difference between the leg position reading from the robot and the leg position from the FK. 

The leg position is defined as the foot position in **hip frame**. Instead, the FK defines the leg position as the foot position in **body frame**. Thus *diff*  should be the **hip position** in **body frame**. 

#### something you should know about mini cheetah and the lcm message

cheetah._bodyLength = 0.19 * 2;
cheetah._bodyWidth = 0.049 * 2;
cheetah._bodyHeight = 0.05 * 2;

FRONT
1 0   RIGHT
3 2
BACK
    x
    ^
    |
y<- z

leg_control_data.p:
[T_Hip_to_FrontRightFoot' T_Hip_to_FrontLeftFoot' ...
 T_Hip_to_HindRightFoot' T_Hip_to_HindLeftFoot']





